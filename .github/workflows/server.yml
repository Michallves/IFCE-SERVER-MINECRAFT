name: Atualização do Servidor Minecraft

on:
  push:
    branches:
      - develop

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Verificar saídas do Docker
      run: docker ps -a

    - name: Parar o contêiner existente
      run: docker stop ifce-minecraft-server t || true

    - name: Remover o contêiner existente
      run: docker rm ifce-minecraft-server t || true

    - name: Construir a imagem do servidor Minecraft
      run: docker build -t ifce-minecraft-server t .

    - name: Executar o contêiner do servidor Minecraft
      run: docker run -d -p 25565:25565 --name ifce-minecraft-server t ifce-minecraft-server t
